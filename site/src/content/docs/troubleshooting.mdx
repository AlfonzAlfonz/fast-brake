---
title: Troubleshooting & FAQ
description: Common issues, debugging tips, and frequently asked questions for fast-brake
---

## Understanding fast-brake

### What is fast-brake?

fast-brake is an ES feature detection library that analyzes JavaScript code to identify ECMAScript features and verify compatibility with target ES versions. It uses high-performance pattern matching that can be significantly faster than traditional AST parsers for compatibility checking.

### How does fast-brake work?

fast-brake uses **optimized pattern matching** with a plugin architecture for maximum performance:
- **Pattern Matching**: Lightning-fast regex-based feature detection
- **Plugin System**: Load only the detection rules you need (up to 85x faster)
- **Optional Location Data**: AST-like location information when needed

This approach makes it ideal for build tools, linters, and CI/CD pipelines where performance is critical.

### Performance Modes

**Plugin Mode** (recommended):
-  **Up to 85x faster** than baseline
-  Perfect for **development builds** and **hot reloading**
-  Target specific ES versions for maximum speed

**Full Detection Mode**:
-  **Comprehensive coverage** of all ES features
-  **Still 3-4x faster** than AST parsers
-  Ideal for **production builds** and **CI/CD pipelines**

## Common Issues

### 1. False Positives in Strings/Comments

**Problem**: Features detected in strings or comments.

```javascript
const code = '"const arrow = () => {}"'; // String contains arrow function
```

**Solution**: fast-brake's patterns are designed to minimize false positives, but some edge cases may occur. For critical production use, consider validating results.

### 2. Performance Not Meeting Expectations

**Problem**: Detection is slower than expected.

**Solution**: Use targeted plugins for maximum performance:

```javascript
// Slow - runs all patterns
const features = detect(code);

// Fast - targeted detection (up to 85x faster!)
import { detectWithPlugins } from 'fast-brake';
const features = detectWithPlugins(code, ['es2015']);
```

### 3. Missing Feature Detection

**Problem**: A specific ES feature isn't being detected.

**Solution**: Check if the feature is supported:

```javascript
import { QUICK_PATTERNS } from 'fast-brake/constants';

// Check available patterns
console.log(Object.keys(QUICK_PATTERNS));

// For unsupported features, consider contributing!
```

### 4. Incorrect Version Mapping

**Problem**: Feature is detected but mapped to wrong ES version.

**Solution**: Verify the version mapping:

```javascript
import { FEATURE_VERSIONS } from 'fast-brake/constants';

console.log(FEATURE_VERSIONS['optional_chaining']); // 'es2020'
```

## Debugging Techniques

### 1. Verbose Output

Enable detailed detection information:

```javascript
const features = detect(code, { includeLoc: true });

features.forEach(feature => {
  console.log(`Feature: ${feature.name}`);
  console.log(`Version: ${feature.version}`);
  console.log(`Location: line ${feature.loc.start.line}, column ${feature.loc.start.column}`);
  console.log(`Snippet: ${feature.snippet}`);
});
```

### 2. Pattern Testing

Test individual patterns:

```javascript
import { QUICK_PATTERNS } from 'fast-brake/constants';

const pattern = QUICK_PATTERNS.arrow_functions;
const matches = code.match(pattern);

if (matches) {
  console.log('Pattern matched:', matches[0]);
  console.log('At position:', matches.index);
}
```

### 3. Plugin Debugging

Debug specific plugins:

```javascript
import { loadPlugin } from 'fast-brake/plugins';

const plugin = loadPlugin(['es2015']);
const results = plugin.detect(code);

console.log('Plugin patterns:', Object.keys(plugin.patterns));
console.log('Detection results:', results);
```

## Performance Optimization

### 1. Use Targeted Plugins

```javascript
// Development - fast feedback
const features = detectWithPlugins(code, ['es2015']);

// Production - comprehensive
const features = detectWithPlugins(code, ['all']);
```

### 2. Batch Processing

```javascript
const detector = getDetector(); // Reuse singleton

const results = files.map(file => ({
  path: file.path,
  features: detector.detect(file.content)
}));
```

### 3. Early Exit Strategy

```javascript
try {
  fastBrake(code, { 
    target: 'es5',
    throwOnFirst: true // Exit on first incompatible feature
  });
} catch (error) {
  console.error('Incompatible:', error.feature);
}
```

## Error Messages

### "ES feature requires X but target is Y"

This error means your code uses features from a newer ES version than your target.

```javascript
// Code uses arrow functions (ES2015)
const fn = () => {};

// But target is ES5
fastBrake(code, { target: 'es5' });
// Error: ES feature "arrow_functions" requires es2015 but target is es5
```

**Solutions:**
1. Update your target version
2. Transpile the code before checking
3. Use a polyfill for the feature

### "Unknown plugin"

This error occurs when requesting a non-existent plugin.

```javascript
detectWithPlugins(code, ['es2030']); // Error: Unknown plugin
```

**Solution**: Check available plugins:
- es5, es2015, es2016, es2017, es2018, es2019, es2020, es2021, es2022, es2023, es2024, es2025
- all, browser, telemetry, detect

## Integration Issues

### Build Tool Integration

**Webpack**:
```javascript
module.exports = {
  module: {
    rules: [{
      test: /\.js$/,
      enforce: 'pre',
      loader: 'fast-brake-loader',
      options: {
        target: 'es2015',
        plugins: ['es2015'] // Optimize performance
      }
    }]
  }
};
```

**Rollup**:
```javascript
import { fastBrake } from 'fast-brake';

export default {
  plugins: [{
    name: 'fast-brake',
    transform(code) {
      try {
        fastBrake(code, { target: 'es2015' });
        return null;
      } catch (error) {
        this.error(error.message);
      }
    }
  }]
};
```

### CI/CD Integration

**GitHub Actions**:
```yaml
- name: Check ES Compatibility
  run: |
    npx fast-brake src/**/*.js --target es2015 --plugins es2015
```

**Pre-commit Hook**:
```json
{
  "husky": {
    "hooks": {
      "pre-commit": "fast-brake --target es2018"
    }
  }
}
```

## Getting Help

### Resources

1. **GitHub Issues**: [Report bugs or request features](https://github.com/yowainwright/fast-brake/issues)
2. **Documentation**: [Full API Reference](/api-reference)
3. **Examples**: [Code examples and recipes](https://github.com/yowainwright/fast-brake/tree/main/examples)

### Debug Checklist

When reporting issues, please include:

- [ ] fast-brake version
- [ ] Node.js version
- [ ] Code sample that reproduces the issue
- [ ] Expected vs actual behavior
- [ ] Performance metrics (if relevant)
- [ ] Plugin configuration used

### Community Support

- **Discord**: Join our community for real-time help
- **Stack Overflow**: Tag questions with `fast-brake`
- **Twitter**: Follow [@yowainwright](https://twitter.com/yowainwright) for updates

## FAQ

**Q: Why is fast-brake faster than AST parsers?**
A: fast-brake uses optimized pattern matching instead of building a full AST, focusing only on feature detection.

**Q: Can fast-brake replace ESLint?**
A: No, fast-brake is specifically for ES feature detection, not general linting.

**Q: Does fast-brake support TypeScript?**
A: fast-brake focuses on JavaScript. For TypeScript, strip types first using a tool like `esbuild`.

**Q: How accurate is pattern matching?**
A: Very accurate for real-world code. Edge cases exist but are rare in production code.

**Q: Can I add custom feature detection?**
A: Yes! Create custom plugins or extend the detector class. See [Advanced Features](/advanced-features).